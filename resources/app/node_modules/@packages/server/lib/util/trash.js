"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.folder = void 0;
const tslib_1 = require("tslib");
const fs_1 = require("./fs");
const os_1 = tslib_1.__importDefault(require("os"));
const path_1 = tslib_1.__importDefault(require("path"));
const trash_1 = tslib_1.__importDefault(require("trash"));
const bluebird_1 = tslib_1.__importDefault(require("bluebird"));
// Moves a folder's contents to the trash (or empties it on Linux)
const folder = async (pathToFolder) => {
    try {
        await fs_1.fs.statAsync(pathToFolder);
        if (os_1.default.platform() === 'linux') {
            await fs_1.fs.emptyDir(pathToFolder);
            return;
        }
        const items = await fs_1.fs.readdir(pathToFolder);
        await bluebird_1.default.map(items, (item) => {
            return (0, trash_1.default)([path_1.default.join(pathToFolder, item)]);
        });
    }
    catch (error) {
        if (error.code === 'ENOENT') {
            return;
        }
        throw error;
    }
};
exports.folder = folder;
exports.default = {
    folder: exports.folder,
};
