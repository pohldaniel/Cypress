"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.installLogging = void 0;
const tslib_1 = require("tslib");
const debug_1 = tslib_1.__importDefault(require("debug"));
const debug = (0, debug_1.default)('cypress:server:cloud:api');
const logRequest = (req) => {
    debug(`${req.method} ${req.url}`);
    return req;
};
const logResponse = (res) => {
    debug(`${res.config.method} ${res.config.url} Success: %d %s -> \n  Response: %o`, res.status, res.statusText, res.data);
    return res;
};
const logResponseErr = (err) => {
    var _a, _b, _c, _d;
    debug(`${(_a = err.config) === null || _a === void 0 ? void 0 : _a.method} ${(_b = err.config) === null || _b === void 0 ? void 0 : _b.url} Error: %s -> \n  Response: %o`, ((_c = err.response) === null || _c === void 0 ? void 0 : _c.statusText) || err.code, (_d = err.response) === null || _d === void 0 ? void 0 : _d.data);
    throw err;
};
const installLogging = (axios) => {
    axios.interceptors.request.use(logRequest);
    axios.interceptors.response.use(logResponse, logResponseErr);
};
exports.installLogging = installLogging;
